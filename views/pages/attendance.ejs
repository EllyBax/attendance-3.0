<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>

    <style>
      @import url("/css/main.css");
      @import url("/css/attendance.css");
    </style>
  </head>

  <body>
    <header>
      <h1 style="margin: 0">Welcome</h1>
      <nav>
        <ul>
          <li><a href="#">location</a></li>
          <li><a href="#">location</a></li>
          <li><a href="#">location</a></li>
          <li><a href="#">location</a></li>
        </ul>
      </nav>
    </header>
<main>
  <div class="table">
    <table class="outlined-table">
      <thead>
        <tr>
          <th>Student Name</th>
          <th>Student ID</th>
          <% lessons.forEach((lesson, index) => { %>
            <th>Lesson <%= index + 1 %></th>
          <% }) %>
          <th>Attendance %</th>
        </tr>
      </thead>
      <tbody>
        <% students.forEach(student => { %>
          <tr>
            <td><%= student.name %></td>
            <td><%= student.registrationnumber %></td>
            <% lessons.forEach(lesson => { %>
              <td>
                <% const attendanceRecord = attendanceRecords.find(record => record.studentid === student.registrationnumber && record.sessionid === lesson.id) %>
                <% if (attendanceRecord && attendanceRecord.present) { %>
                  ✅
                <% } else { %>
                  ❌
                <% } %>
              </td>
            <% }) %>
            <td>
              <% const totalLessons = lessons.length %>
              <% const presentCount = attendanceRecords.filter(record => record.studentid === student.registrationnumber && record.present).length %>
              <%= ((presentCount / totalLessons) * 100).toFixed(2) %>%
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</main>

    <footer><p>2024&copy; DIT</p></footer>
  </body>
</html>
